<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Encriptador</title>
    <link rel="stylesheet" href="./encriptador.css" />
  </head>

  <body onLoad="scroll();">
    <div class="content">
      <h2 class="encriptador_tittle">Encriptador</h2>
      <div class="content-areas">
          <div class="letter">
            <img src="./images/alura.png" alt="alura" />
  
            <!-- <figure class="icon-cards mt-3">
              <div class="icon-cards__content">
                <div
                  class="icon-cards__item d-flex align-items-center justify-content-center"
                >
                  <span class="h1"><img src="./images/github.png" alt="github logo" /></span>
                </div>
                <div
                  class="icon-cards__item d-flex align-items-center justify-content-center"
                >
                  <span class="h1"><img src="./images/linkedin.png" alt="linkedin logo" /></span>
                </div>
                <div
                  class="icon-cards__item d-flex align-items-center justify-content-center"
                >
                  <span class="h1"><img src="./images/github.png" alt="github logo" /></span>
                </div>
                
              </div>
            </figure> -->
  
            <!-- <div class="content__container">
              <ul class="content__container__list">
                <li class="content__container__list__item">
                  <a
                    href="https://github.com/pmarchionno"
                    target="_blank"
                    rel="noopener noreferrer"
                    ><img src="./images/github.png" alt="github logo" /></a
                  >GitHub
                </li>
                <li class="content__container__list__item">
                  <a
                    href="https://www.linkedin.com/in/pablo-marchionno/"
                    target="_blank"
                    rel="noopener noreferrer"
                    ><img src="./images/linkedin.png" alt="linkedin logo" /></a
                  >LinkeIn
                </li>
                <li class="content__container__list__item">
                  <a
                    href="https://github.com/pmarchionno"
                    target="_blank"
                    rel="noopener noreferrer"
                    ><img src="./images/github.png" alt="github logo" /></a
                  >GitHub
                </li>
                <li class="content__container__list__item">
                  <a
                    href="https://www.linkedin.com/in/pablo-marchionno/"
                    target="_blank"
                    rel="noopener noreferrer"
                    ><img src="./images/linkedin.png" alt="linkedin logo" /></a
                  >LinkeIn
                </li>
              </ul>
            </div> -->
        </div>

        <div class="area1">
          <textarea
            name="mensaje1"
            id="mensaje1"
            class="textarea-enc"
            rows="10"
            cols="50"
            placeholder="Escribe aquí tu mensaje"
          ></textarea>

          <div class="alert-div">
            <img src="./images//alert2.png" alt="alert" class="alert-img" />
            <input
              type="text"
              class="input-alert-message"
              value="Solo letras minúsculas y sin acentos"
              readonly
            />
          </div>

          <div class="btn-content">
            <button
              name="encriptar"
              onclick="encriptar()"
              class="btn-encriptar"
            >
              Encriptar
            </button>
            <button
              name="recibir"
              onclick="desencriptar()"
              class="btn-desencriptar"
            >
              Desencriptar
            </button>
          </div>
        </div>

        <div class="area2">
          <textarea
            name="mensaje2"
            id="mensaje2"
            class="textarea-dec no-visible"
            rows="10"
            cols="50"
            readonly
            placeholder="Aquí se verá tu mensaje encriptado/desencriptado"
          ></textarea>
          <div class="textarea-background" id="textarea-background-id">
            <img
              src="./images/nada.png"
              alt="image-nada"
              name="image-nada"
              class="image-nada"
            />
            <h1 class="text-center" style="display: block">
              Ningún mensaje fue encontrado
            </h1>
            <h3 class="text-center2" style="display: block">
              Ingrese el texto que desee encriptar o desencriptar.
            </h3>
          </div>
          
          <div class="btn-content-copy" name="btn-content-copy">
            <div class="alert-div2">
              <input
                type="text"
                class="input-alert-message"
                value=""
                readonly
              />
            </div>

            <div class="btn-copy-class">
              <button
                name="copiar"
                id="copiar"
                onclick="copiarAlPortapapeles()"
                class="btn-copy"
                style="display: none"
              >
                Copiar
              </button>

            </div>
          </div>

        </div>

      </div>

      

    <footer>
        <form name="frm" class="frm-rodapie">
          <div class="rodapie-topo">
            <div class="container"><a href="#" class="rodapie-topo__label">
              <input type="text" name="w" class="rodapie" readonly />
              </a>
          </div>
        </form>
    </footer>

    <script>
      var mensaje1 = document.getElementsByName("mensaje1");
      var mensaje2 = document.getElementsByName("mensaje2");

      var btnEncriptar = document.getElementsByName("encriptar");
      var btnDesencriptar = document.getElementsByName("desencriptar");

      var dic = {
        e: "enter",
        i: "imes",
        a: "ai",
        o: "ober",
        u: "ufat",
      };

      function encriptar() {
        let texto = document.querySelectorAll("textarea")[0].value;
        let result = "";

        if (
          texto.indexOf(dic["a"]) >= 0 ||
          texto.indexOf(dic["e"]) >= 0 ||
          texto.indexOf(dic["i"]) >= 0 ||
          texto.indexOf(dic["o"]) >= 0 ||
          texto.indexOf(dic["u"]) >= 0
        ) {
          var notification = new Notification(
            "El mensaje ya se encuentra encriptado"
          );
          setTimeout(function () {
            notification.close();
          }, 2000);
          alert("El mensaje ya se encuentra encriptado");
        } else {
          for (let i = 0; i < texto.length; i++) {
            if (dic[texto[i]]) {
              result += dic[texto[i]];
            } else {
              result += texto[i];
            }
          }
          if (result.length > 0) {
            document
              .querySelectorAll("textarea")[1]
              .setAttribute("class", "textarea-dec");

            document.getElementById("textarea-background-id").style.display =
              "none";
            document.getElementById("copiar").style.display = "block";

            var notification = new Notification(
              "El mensaje ha sido encriptado"
            );
            setTimeout(function () {
              notification.close();
            }, 2000);
          } else {
            document
              .querySelectorAll("textarea")[1]
              .setAttribute("class", "no-visible");

            document.getElementById("textarea-background-id").style.display =
              "block";
            document.getElementById("copiar").style.display = "none";
          }
          document.querySelectorAll("textarea")[1].value = result;
        }
      }

      function replaceTextDic(texto) {
        let result = texto;

        for (var i in dic) {
          result = result.replaceAll(dic[i], i);
        }

        if (result.length > 0) {
          document
            .querySelectorAll("textarea")[1]
            .setAttribute("class", "textarea-dec");
        } else {
          document
            .querySelectorAll("textarea")[1]
            .setAttribute("class", "no-visible");
        }
        return result;
      }

      function desencriptar() {
        let texto = document.querySelectorAll("textarea")[0].value;
        let result = "";

        result = replaceTextDic(texto);
        document.querySelectorAll("textarea")[1].value = result;
        if (result.length > 0) {
          document.getElementById("textarea-background-id").style.display =
            "none";
          document.getElementById("copiar").style.display = "block";
          var notification = new Notification(
            "El mensaje ha sido desencriptado"
          );
          setTimeout(function () {
            notification.close();
          }, 2000);
        } else {
          document.getElementById("textarea-background-id").style.display =
            "block";
          document.getElementById("copiar").style.display = "none";
        }
      }

      function copiarTextClipBoard_v1() {
        let texto = document.querySelectorAll("textarea")[1];
        let copy = texto.select();
        document.execCommand("copy");
        var notification = new Notification("El mensaje ha sido copiado");
        setTimeout(function () {
          notification.close();
        }, 2000);

        alert("Copied!");
      }

      function copiarAlPortapapelesOK() {
        let textarea = document.querySelectorAll("textarea")[1].select();
        document.execCommand("copy");
      }

      function copiarAlPortapapeles() {
        // Creamos un campo de texto "oculto"
        var aux = document.createElement("textarea");
        // Añadimos el campo a la página
        document.body.appendChild(aux);

        let texto = document.querySelectorAll("textarea")[1].value;
        // Asignamos el contenido del elemento
        aux.setAttribute("value", texto);
        aux.value = texto;
        aux.setAttribute("readonly", "");

        // Seleccionamos todo el contenido del campo
        aux.select();

        // Copiamos el texto seleccionado
        document.execCommand("copy");

        // Eliminamos el campo de la página
        document.body.removeChild(aux);
        var notification = new Notification("El mensaje ha sido copiado");
        setTimeout(function () {
          notification.close();
        }, 2000);
      }

      var rodapie =
        "Pablo Marchionno     -     " +
        "Github: pmarchionno     -     " +
        "LinkedIn: www.linkedin.com/in/pablo-marchionno                                ";

      function scroll() {
        document.frm.w.value = rodapie;
        rodapie = rodapie.substring(1, rodapie.length) + rodapie.charAt(0);
        window.setTimeout("scroll()", 150);
      }

      function classToggleAnimation() {
        var el = document.querySelector(".icon-cards__content");
        el.classList.toggle("step-animation");
      }

      // document
      //   .querySelector("#toggle-animation")
      //   .addEventListener("click", classToggleAnimation);
    </script>
  </body>
</html>
